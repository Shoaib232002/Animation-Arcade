#!/bin/sh


set -e

set -e 

npx eslint .

npx stylelint "**/*.css" --allow-empty-input
echo " ESLint passed"

echo ""
echo "=== Running Stylelint ==="
npx stylelint "**/*.css"
echo " Stylelint passed"

STAGED_JS_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.js$' || true)

if [ -n "$STAGED_JS_FILES" ]; then
  node --experimental-vm-modules node_modules/jest/bin/jest.js --bail --findRelatedTests $STAGED_JS_FILES
else
  npm test
fi
<<<<<<< HEAD
echo ""
=======

>>>>>>> fcafaf8 (fix: add verbose debugging to pre-commit)
echo " All checks passed!"
